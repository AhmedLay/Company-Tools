@page "/vacation-schedule"
@inherits VacationScheduleFileBase

<PageTitle>Vacation Request</PageTitle>
<MudTabs Elevation="0" Rounded="false" Outlined="true" Centered="true" PanelClass="p-0">
    <MudTabPanel Text="List View">
        <ChildContent>
            <MudDataGrid Items="@List" Filterable="false" SortMode="@SortMode.None" Groupable="false">
                <ToolBarContent>
                    <MudText Typo="Typo.h6">Your Drafts</MudText>
                    <MudSpacer />
                    <MudButton Size="@Size.Medium" Variant="@Variant.Outlined" Color="@Color.Tertiary" OnClick="OpenDrawer">Create a Request</MudButton>
                </ToolBarContent>
                <Columns>
                    <PropertyColumn Property="x => x.Comment" Title="Comment" />
                    <PropertyColumn Property="x => x.From" Title="From" Format="dd-MM-yyyy" />
                    <PropertyColumn Property="x => x.To" Title="To" Format="dd-MM-yyyy" />
                    <TemplateColumn CellClass="d-flex justify-end">
                        <CellTemplate>
                            <MudStack Row>
                                <MudMenu Icon="@Icons.Material.Filled.Settings" Color="Color.Primary" Dense="true">
                                    <MudMenuItem>
                                        <MudIcon Icon="@Icons.Material.Filled.Delete" />
                                        Delete
                                    </MudMenuItem>
                                    <MudMenuItem>
                                        <MudIcon Icon="@Icons.Material.Filled.Edit" />
                                        Edit Draft
                                    </MudMenuItem>
                                    <MudMenuItem>
                                        <MudIcon Icon="@Icons.Material.Filled.Send" />
                                        Send
                                    </MudMenuItem>
                                </MudMenu>
                            </MudStack>
                        </CellTemplate>
                    </TemplateColumn>
                </Columns>
            </MudDataGrid>

            <MudDrawer @bind-Open="@_open" Width="600px" Height="100%" Anchor="Anchor.Right" Variant="@DrawerVariant.Temporary">
                <MudCard Class="drawer-card">
                    <MudCardContent Class="drawer-card-content">
                        <MudText Align="Align.Center">Vacation Request</MudText>
                        <MudForm Spacing="2" Class="form-container">
                            <MudTextField T="int" Label="EmployeeID" @bind-value="CurrentRequest.EmployeeId"/>
                            <MudDatePicker Label="From" @bind-Date="CurrentRequest.From" />
                            <MudDatePicker Label="To" @bind-Date="CurrentRequest.To" />
                            <MudTextField T="string" Label="Comment" @bind-Text="CurrentRequest.Comment" Lines="3" />
                            <MudSelect T="bool" Label="Request Type" @bind-Value="CurrentRequest.RequestType" Required="true" Class="radio-group">
                                <MudSelectItem Value="true">Vacation</MudSelectItem>
                                <MudSelectItem Value="false">Sick Leave</MudSelectItem>
                            </MudSelect>
                            <MudButton OnClick="SaveDraft" Variant="Variant.Outlined" Color="Color.Secondary" FullWidth="true">Save Draft</MudButton>
                            <MudButton OnClick="SubmitRequest" Variant="Variant.Filled" Color="Color.Success" FullWidth="true">Submit Request</MudButton>

                        </MudForm>
                    </MudCardContent>
                </MudCard>
            </MudDrawer>
        </ChildContent>
    </MudTabPanel>

    <MudTabPanel Text="Calendar View">
        <ChildContent>
            <MudCalendar Color="Color.Inherit" />
        </ChildContent>
    </MudTabPanel>
</MudTabs>
