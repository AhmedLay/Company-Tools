@page "/file-upload"
@inherits UploadEmployeeFileBase

<MudPaper Class="d-flex flex-column align-center py-4">
    <MudText Typo="Typo.h4" GutterBottom="true">Employee File Upload</MudText>
    <MudText Typo="Typo.body1" Class="mb-4 text-center">
        Please upload a CSV or TXT file to import your employees into the database.
        Maximum 10 at once per upload.
        Supported formats: .csv or .txt.
        Each file must follow the required format.

    </MudText>

    <MudFileUpload T="IReadOnlyList<IBrowserFile>"
                   Accept=".txt, .csv"
                   FilesChanged="LoadFiles">
        <ActivatorContent>
            <MudButton Variant="Variant.Filled"
                       Color="Color.Warning"
                       Class="mb-2"
                       StartIcon="@Icons.Material.Filled.UploadFile">
                Load Files
            </MudButton>
        </ActivatorContent>
    </MudFileUpload>

    <MudButton Variant="Variant.Filled"
               Color="Color.Success"
               Class="mb-4"
               OnClick="SubmitFiles"
               StartIcon="@Icons.Material.Filled.CloudUpload">
        Submit Files
    </MudButton>  

    <MudText Typo="@Typo.h6">Ready files:</MudText>
    <MudList T="string">
        @foreach (var file in UploadedFiles)
        {
            <MudListItem @key="@file" OnClick="() => RemoveFile(file)">
                <MudItem Class="custom-flex-layout">
                    @file.Name
                    <MudIconButton Icon="@Icons.Material.Filled.Delete" Color="Color.Error" OnClick="() => RemoveFile(file)" />
                </MudItem>
            </MudListItem>
        }
    </MudList>
</MudPaper>

<MudOverlay @bind-Visible="_visible" DarkBackground>
    <MudProgressCircular Color="Color.Success" Indeterminate="true" />
</MudOverlay>

